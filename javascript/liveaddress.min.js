var LiveAddress=function(){function l(e,t,n,r){var i=document.getElementById(e);return c({street:i?i.value:e},t,n,r)}function c(e,t,n,i){if(!e)return null;var s=[],u={};var a="batch_"+o++;e=e instanceof Array?e:[e];r[a]={size:e.length,returned:0,json:[],userCallback:t,wrap:i||function(e){return e}};for(var f in e)s.push(h(e[f],a,f,n));return s}function h(e,t,r,i){var s={fields:e};s.id="addr_"+o++;s.inputIndex=parseInt(r);s.json=[];s.batch=t;s.userTimeout=i;s.callback=function(e){v(s.id,e)};n[s.id]=s;return s.id}function p(r){var i=n[r],s;if(e&&t)s="?auth-id="+e+"&auth-token="+t+"&candidates="+u;else s="?auth-token="+e+"&candidates="+u;for(prop in i.fields)s+="&"+prop+"="+encodeURIComponent(i.fields[prop]);s+="&callback="+encodeURIComponent('LiveAddress.request("'+r+'").callback');return s}function d(e){for(i in e){var t=document.createElement("script");t.src="https://api.qualifiedaddress.com/street-address"+p(e[i]);document.getElementsByTagName("body")[0].appendChild(t);n[e[i]].DOM=t;s[e[i]]={attempts:s[e[i]]?s[e[i]].attempts||0:0,timeoutID:setTimeout(m(e[i]),a)}}}function v(e,t){var i=n[e];var o=r[i.batch];for(var u in t)t[u].input_index=i.inputIndex;o.json=o.json.concat(t);document.getElementsByTagName("body")[0].removeChild(i.DOM);delete n[e];clearTimeout(s[e].timeoutID);delete s[e];if(++o.returned==o.size){var a=o.userCallback(o.wrap(o.json));delete r[i.batch];return a}}function m(e){return function(){if(++s[e].attempts<f)d([e]);else if(typeof n[e].userTimeout==="function")n[e].userTimeout(n[e].fields)}}function g(e){if(!e||typeof e!=="object")return undefined;return{lat:e.metadata.latitude,lon:e.metadata.longitude,precision:e.metadata.precision,coords:e.metadata.latitude+", "+e.metadata.longitude}}var e,t;var n={};var r={};var s={};var o=0;var u=5;var a=3500;var f=3;return{init:function(n,r){e=encodeURIComponent(n||"");t=encodeURIComponent(r||"")},verify:function(e,t,n,r){var i;if(typeof e==="string")i=l(e,t,n,r);else if(typeof e==="object"&&!(e instanceof Array))i=c(e,t,n,r);else if(e instanceof Array){var s=[];for(idx in e){if(typeof e[idx]=="string"){var o=document.getElementById(e);s.push({street:o?o.value:e[idx]})}else s.push(e[idx])}i=c(s,t,n,r)}d(i)},request:function(e){return n[e]},geocode:function(e,t,n){this.verify(e,t,n,function(e){if(e.length==1)return g(e[0]);else{var t=[];for(var n in e)t.push(g(e[n]));return t}})},components:function(e,t,n){this.verify(e,t,n,function(e){var t=[];for(idx in e){e[idx].components.first_line=e[idx].delivery_line_1;if(typeof e[idx].delivery_line_2!=="undefined")e[idx].components.first_line+=" "+e[idx].delivery_line_2;e[idx].components.last_line=e[idx].last_line;if(typeof e[idx].addressee!=="undefined")e[idx].components.addressee=e[idx].addressee;t.push(e[idx].components)}return t})},county:function(e,t,n){this.verify(e,t,n,function(e){return e[0].metadata.county_name})}}}()