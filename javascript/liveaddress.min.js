var LiveAddress=function(){function g(a,b,c){var d=document.getElementById(a);return h({street:d?d.value:a},b,c)}function h(a,b,c){if(!a)return null;var f=[],g={};var h="batch_"+e++;a=a instanceof Array?a:[a];d[h]={size:a.length,returned:0,json:[],userCallback:b,wrap:c||function(a){return a}};for(var i in a)f.push(j(a[i],h,i));return f}function j(a,b,d){var f={fields:a};f.id="addr_"+e++;f.inputIndex=parseInt(d);f.json=[];f.batch=b;f.callback=function(a){LiveAddress.callback(f.id,a)};c[f.id]=f;return f.id}function k(d){var e=c[d],g;if(a&&b)g="?auth-id="+a+"&auth-token="+b+"&candidates="+f;else g="?auth-token="+a+"&candidates="+f;for(prop in e.fields)g+="&"+prop+"="+encodeURIComponent(e.fields[prop]);g+="&callback="+encodeURIComponent('LiveAddress.request("'+d+'").callback');return g}function l(a){for(i in a){var b=document.createElement("script");b.src="https://api.qualifiedaddress.com/street-address"+k(a[i]);document.body.appendChild(b);c[a[i]].DOM=b}}var a,b;var c=[];var d={};var e=0;var f=5;return{init:function(c,d){a=encodeURIComponent(c||"");b=encodeURIComponent(d||"")},verify:function(a,b,c){var d;if(typeof a==="string")d=g(a,b,c);else if(typeof a==="object"&&!(a instanceof Array))d=h(a,b,c);else if(a instanceof Array){var e=[];for(idx in a){if(typeof a[idx]=="string"){var f=document.getElementById(a);e.push({street:f?f.value:a[idx]})}else e.push(a[idx])}d=h(e,b,c)}l(d)},coords:function(a){if(!a)return{};return{lat:a.metadata.latitude,lon:a.metadata.longitude}},coordinates:function(a){if(!a)return undefined;return{lat:a.metadata.latitude,lon:a.metadata.longitude,precision:a.metadata.precision,coords:a.metadata.latitude+", "+a.metadata.longitude}},request:function(a){return c[a]},geocode:function(a,b){this.verify(a,b,function(a){if(a.length==1)return LiveAddress.coordinates(a[0]);else{var b=[];for(var c in a)b.push(LiveAddress.coordinates(a[c]));return b}})},components:function(a,b){this.verify(a,b,function(a){var b=[];for(idx in a){a[idx].components.first_line=a[idx].delivery_line_1;if(typeof a[idx].delivery_line_2!=="undefined")a[idx].components.first_line+=" "+a[idx].delivery_line_2;a[idx].components.last_line=a[idx].last_line;if(typeof a[idx].addressee!=="undefined")a[idx].components.addressee=a[idx].addressee;b.push(a[idx].components)}return b})},county:function(a,b){this.verify(a,b,function(a){return a[0].metadata.county_name})},callback:function(a,b){var e=c[a];var f=d[e.batch];for(var g in b)b[g].input_index=e.inputIndex;f.json=f.json.concat(b);document.body.removeChild(e.DOM);delete c[a];if(++f.returned==f.size){var h=f.userCallback(f.wrap(f.json));delete d[e.batch];return h}}}}()